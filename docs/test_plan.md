# テスト仕様書兼エビデンス計画

本ドキュメントは、勤怠管理システム（AtkSystem）の機能が設計通りに実装されているかを確認するためのチェックリストおよびエビデンス取得計画です。
ポートフォリオとして提示することを想定し、客観的に動作を証明できるエビデンスの取得方法も定義しています。

## 1. テスト実施環境
- **ブラウザ**: Chrome / Edge
- **データベース**: Local SQL Server
- **ツール**: A5:SQL Mk-2 (DB確認用), Snipping Tool (画面キャプチャ用)

## 2. アカウント準備
テスト用に以下の2種類のアカウントを用意してください。
1. **管理者 (Admin/Manager)**: 全機能、承認、ユーザー管理が可能
2. **一般社員 (User)**: 打刻、休暇申請のみ可能

## 3. テストチェックリスト

### 3.1 認証機能 (Account)
| ID | 項目 | 手順 | 期待値 | 推奨エビデンス |
|----|------|------|--------|----------------|
| A-01 | ログイン成功 | 正しいID・PWでログインする | ダッシュボード（勤怠画面）に遷移する | ログイン後のTOP画面キャプチャ |
| A-02 | ログイン失敗 | 誤ったPWでログインする | エラーメッセージが表示される | エラー表示画面のキャプチャ |
| A-03 | ログアウト | メニューからログアウトする | ログイン画面に戻る | ログイン画面のキャプチャ |

### 3.2 勤怠打刻機能 (Attendance)
| ID | 項目 | 手順 | 期待値 | 推奨エビデンス |
|----|------|------|--------|----------------|
| B-01 | 出勤打刻 | 「出勤」ボタンを押下 | 今日のステータスが「出勤中」になり、打刻時間が表示される | 打刻後の画面、DBの`Attendances`テーブルの該当レコード |
| B-02 | 休憩開始 | 「休憩開始」ボタンを押下 | ステータスが「休憩中」になる | 画面キャプチャ |
| B-03 | 休憩終了 | 「休憩終了」ボタンを押下 | ステータスが「出勤中」に戻る | 画面キャプチャ |
| B-04 | 退勤打刻 | 「退勤」ボタンを押下 | ステータスが「退勤済」になり、実働時間が計算される | 画面キャプチャ、DBの`Attendances`テーブルの更新後レコード |
| B-05 | 履歴表示 | 過去の月を選択して表示 | 該当する月の勤怠データが表示される | 月次リスト画面のキャプチャ |
| B-06 | CSV出力 | (管理者) CSVエクスポートを実行 | 勤怠データがCSVとしてDLできる | DLしたCSVファイルの中身 |

### 3.3 休暇管理機能 (Leave)
| ID | 項目 | 手順 | 期待値 | 推奨エビデンス |
|----|------|------|--------|----------------|
| C-01 | 休暇申請 | 「新規申請」から日付・理由を入力し申請 | 申請一覧に「承認待ち」として追加される | 申請完了画面、DBの`LeaveRequests`テーブル |
| C-02 | 申請一覧 | 申請履歴画面を開く | 過去の申請が表示される | 一覧画面キャプチャ |
| C-03 | 承認 (管理者) | (管理者) 承認待ち一覧から「承認」を押下 | ステータスが「承認済」になる | 管理画面キャプチャ、申請ユーザー側の一覧画面 |
| C-04 | 却下 (管理者) | (管理者) 承認待ち一覧から「却下」を押下 | ステータスが「却下」になる | 管理画面キャプチャ |

### 3.4 ユーザー管理機能 (User) - 管理者のみ
| ID | 項目 | 手順 | 期待値 | 推奨エビデンス |
|----|------|------|--------|----------------|
| D-01 | ユーザー一覧 | ユーザー管理画面を開く | 登録済みユーザー一覧が表示される | 一覧画面キャプチャ |
| D-02 | 新規登録 | 新しいユーザー情報とPWを入力し登録 | 一覧に追加され、その情報でログイン可能になる | 登録完了画面、DBの`Users`テーブル |
| D-03 | 情報編集 / 無効化 | 既存ユーザーの情報を変更、または「有効」チェックを外す | 変更が反映される（無効化するとログイン不可になる） | 編集後の画面、DBの`IsActive`カラム |
| D-04 | パスワードリセット | (管理者) 編集画面で新しいPWを入力して保存 | 対象ユーザーのPWが変更され、新PWでログインできる | 編集画面、ログイン成功画面 |


### 3.5 未実装機能（設計書との差異確認）
ソースコード上、以下の機能が見当たりません。設計書に含まれている場合、実装漏れの可能性があります。

| ID | 機能名 | 推測される要件 | 現状 |
|----|--------|----------------|------|
| E-01 | 勤怠修正 | 管理者または社員が打刻ミスを修正する | `AttendanceController`に編集用アクションなし。打刻はInsertのみ。 |
| E-02 | パスワード変更(本人) | ユーザー自身がプロフィール画面等で変更する | 自己変更画面なし（管理者に依頼する必要あり）。 |
| E-03 | 部署管理 | 部署の追加・編集・削除 | `Department`テーブルはあるが、操作画面なし（DB直接操作が必要）。 |



## 4. エビデンス取得・保存ガイド

### 画面キャプチャの方法
- **Windows標準機能**: `Win + Shift + S` で範囲選択してクリップボードにコピーし、ExcelやWord等のテスト成績書に貼り付けるのがスムーズです。
- **全画面取得**: ブラウザのアドレスバーも含めて撮ることで、URLの正当性も証明できます。

### データベース証跡の取得
- A5:SQL Mk-2 で対象テーブル（`Attendances`, `LeaveRequests` など）を開き、データが入っている様子をスクリーンショットで保存します。
- 特に「打刻時間」や「ステータスID」が変化した前後の比較があると、ロジックが正しく動いている強力な証明になります。

### ポートフォリオへの掲載形式案
下記のようなMarkdown形式でGitHubのWikiや別途PDFなどにまとめると見やすいです。

#### 【テスト結果 No.B-01】 出勤打刻機能
- **実施日**: 2026/01/18
- **結果**: OK
- **エビデンス**:
  - **画面**: (ここにスクショ)
  - **DB**: (ここにDBのスクショ)
  - **補足**: ボタン押下後、即座にレコードがINSERTされたことを確認。

---
このチェックリストに基づいてテストを進めることで、設計書の通りにシステムが動作していることを網羅的に確認できます。
